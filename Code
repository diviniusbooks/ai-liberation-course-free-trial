<div className={w-8 h-8 rounded-lg flex items-center justify-center ${ currentModule === parseInt(modId) ? 'bg-white bg-opacity-20' : bg-gradient-to-r ${mod.color} }}>
<ModIcon className={w-5 h-5 ${currentModule === parseInt(modId) ? 'text-white' : 'text-white'}} />


{mod.title}
{modCompleted}/{modLessons.length}


{isExpanded ?  : }


{isExpanded && (
                  <div className="ml-4 mt-2 space-y-1">
                    {mod.lessons.map((lesson, idx) => {
                      const isCompleted = completedLessons.has(lesson.id);
                      const isCurrent = currentLesson === lesson.id;
                      
                      return (
                        <button
                          key={lesson.id}
                          onClick={() => {
                            setCurrentModule(parseInt(modId));
                            setCurrentLesson(lesson.id);
                          }}
                          className={`w-full text-left p-2 rounded text-sm transition-all ${
                            isCurrent
                              ? 'bg-purple-100 text-purple-700 font-semibold'
                              : isCompleted
                              ? 'bg-green-50 text-green-700'
                              : 'hover:bg-gray-50 text-gray-600'
                          }`}
                        >
                          <div className="flex items-center gap-2">
                            <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs ${
                              isCompleted ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-600'
                            }`}>
                              {isCompleted ? 'âœ“' : idx + 1}
                            </div>
                            <span className="truncate">{lesson.title}</span>
                          </div>
                        </button>
                      );
                    })}
                  </div>
                )}
              </div>
            );
          })}
        </div>
      </div>

      {/* Main Content */}
      <div className="lg:col-span-2">
        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
          <div className="flex items-center gap-2 mb-4">
            <div className="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold uppercase">
              {currentLessonData?.type}
            </div>
            <div className="text-sm text-gray-500">{currentLessonData?.duration}</div>
          </div>

          <h2 className="text-2xl md:text-3xl font-bold text-gray-800 mb-4">
            {currentLessonData?.title}
          </h2>

          <div className="prose max-w-none mb-6">
            <p className="text-gray-700 text-lg leading-relaxed">
              {currentLessonData?.content}
            </p>
          </div>

          {currentLessonData?.keyPoints && (
            <div className="p-4 bg-blue-50 border-l-4 border-blue-400 rounded mb-6">
              <div className="font-semibold text-blue-900 mb-2">Key Points:</div>
              <ul className="space-y-1">
                {currentLessonData.keyPoints.map((point, idx) => (
                  <li key={idx} className="text-blue-800 text-sm flex items-start gap-2">
                    <span className="text-blue-600 mt-0.5">â€¢</span>
                    <span>{point}</span>
                  </li>
                ))}
              </ul>
            </div>
          )}

          {currentLessonData?.keyTakeaway && (
            <div className="p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded mb-6">
              <div className="flex items-start gap-3">
                <Lightbulb className="w-5 h-5 text-yellow-600 flex-shrink-0 mt-1" />
                <div>
                  <div className="font-semibold text-yellow-900 mb-1">Key Takeaway</div>
                  <p className="text-yellow-800">{currentLessonData.keyTakeaway}</p>
                </div>
              </div>
            </div>
          )}

          {currentLessonData?.question && (
            <div className="mb-6">
              <label className="block text-sm font-semibold text-gray-700 mb-2">
                {currentLessonData.question}
              </label>
              <textarea
                id="lessonAnswer"
                defaultValue={answers[currentLesson] || ''}
                placeholder="Write your answer here..."
                className="w-full h-32 p-4 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:outline-none resize-none"
              />
            </div>
          )}

          {currentLessonData?.exercise && (
            <div className="p-4 bg-purple-50 rounded-lg mb-6">
              <div className="flex items-start gap-3">
                <Target className="w-5 h-5 text-purple-600 flex-shrink-0 mt-1" />
                <div>
                  <div className="font-semibold text-purple-900 mb-1">Your Exercise</div>
                  <p className="text-purple-800">{currentLessonData.exercise}</p>
                </div>
              </div>
            </div>
          )}

          {currentLessonData?.action && (
            <div className="p-4 bg-green-50 border-l-4 border-green-400 rounded mb-6">
              <div className="flex items-start gap-3">
                <Rocket className="w-5 h-5 text-green-600 flex-shrink-0 mt-1" />
                <div>
                  <div className="font-semibold text-green-900 mb-1">Action Step</div>
                  <p className="text-green-800">{currentLessonData.action}</p>
                </div>
              </div>
            </div>
          )}

          {currentLessonData?.quiz && (
            <div className="mb-6 space-y-4">
              <h3 className="font-bold text-gray-800">Quick Knowledge Check</h3>
              {currentLessonData.quiz.map((q, idx) => (
                <div key={idx} className="p-4 bg-gray-50 rounded-lg">
                  <div className="font-semibold text-gray-800 mb-3">{q.q}</div>
                  <div className="space-y-2">
                    {q.options.map((opt, optIdx) => (
                      <button
                        key={optIdx}
                        onClick={(e) => {
                          const isCorrect = opt === q.a;
                          const button = e.currentTarget;
                          if (isCorrect) {
                            button.className = 'w-full text-left p-3 rounded-lg bg-green-500 text-white transition-all';
                            setTimeout(() => {
                              button.className = 'w-full text-left p-3 rounded-lg bg-green-100 border-2 border-green-500 text-gray-800';
                            }, 1000);
                          } else {
                            button.className = 'w-full text-left p-3 rounded-lg bg-red-200 text-red-800 transition-all';
                            setTimeout(() => {
                              button.className = 'w-full text-left p-3 rounded-lg bg-white border-2 border-gray-200 hover:border-purple-300 transition-all';
                            }, 1000);
                          }
                        }}
                        className="w-full text-left p-3 rounded-lg bg-white border-2 border-gray-200 hover:border-purple-300 transition-all"
                      >
                        {opt}
                      </button>
                    ))}
                  </div>
                </div>
              ))}
            </div>
          )}

          {currentLessonData?.resources && (
            <div className="mb-6">
              <h3 className="font-bold text-gray-800 mb-3">Resources</h3>
              <div className="space-y-2">
                {currentLessonData.resources.map((res, idx) => (
                  <a
                    key={idx}
                    href={res.link}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="flex items-center gap-2 p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-all"
                  >
                    <Download className="w-4 h-4 text-blue-600" />
                    <span className="text-blue-700 font-semibold">{res.name}</span>
                  </a>
                ))}
              </div>
            </div>
          )}

          {/* Action Buttons */}
          <div className="flex flex-wrap gap-3 mt-8">
            <button
              onClick={handleCompleteLesson}
              className="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg flex items-center justify-center gap-2 font-semibold"
            >
              <CheckCircle className="w-5 h-5" />
              {completedLessons.has(currentLesson) ? 'Completed âœ“' : 'Mark Complete'}
            </button>
            
            <button
              onClick={() => {
                const nextLesson = currentLesson + 1;
                const allLessons = Object.values(modules).flatMap(m => m.lessons);
                if (allLessons.find(l => l.id === nextLesson)) {
                  setCurrentLesson(nextLesson);
                  Object.entries(modules).forEach(([modId, mod]) => {
                    if (mod.lessons.find(l => l.id === nextLesson)) {
                      setCurrentModule(parseInt(modId));
                    }
                  });
                  window.scrollTo(0, 0);
                }
              }}
              disabled={currentLesson >= totalLessons}
              className="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all disabled:opacity-50 flex items-center gap-2"
            >
              Next <ArrowRight className="w-4 h-4" />
            </button>
          </div>

          <div className="mt-4 flex flex-wrap gap-2">
            <button
              onClick={() => {
                const shareText = `Just completed "${currentLessonData?.title}" in AI Liberation! ðŸš€\n\nMastering AI one lesson at a time.\n\nJoin me: DivinusBooks.carrd.co\n\n#AILiberation`;
                if (navigator.share) {
                  navigator.share({ text: shareText });
                } else {
                  navigator.clipboard.writeText(shareText);
                  alert('âœ“ Copied! Share on social media');
                }
              }}
              className="px-4 py-2 bg-white border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all flex items-center gap-2 text-sm"
            >
              <Share2 className="w-4 h-4" />
              Share
            </button>
          </div>

          {/* Celebration */}
          {currentLessonData?.celebration && completedLessons.has(currentLesson) && (
            <div className="mt-6 p-4 bg-gradient-to-r from-green-100 to-emerald-100 rounded-lg border-2 border-green-300 text-center">
              <div className="text-3xl mb-2">ðŸŽ‰</div>
              <div className="font-bold text-green-900">{currentLessonData.celebration}</div>
            </div>
          )}
        </div>

        {/* Book Upsell */}
        {currentLesson % 3 === 0 && (
          <div className="bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg shadow-lg p-6 mb-6 border-2 border-purple-300">
            <div className="flex items-start gap-4">
              <BookOpen className="w-12 h-12 text-purple-600 flex-shrink-0" />
              <div className="flex-1">
                <h3 className="text-xl font-bold text-purple-900 mb-2">ðŸ“š Want the complete workbook?</h3>
                <p className="text-purple-800 mb-4">
                  Get AI Liberation with all exercises, trackers, and bonus content. Premium quality!
                </p>
                <button
                  onClick={() => window.open('https://amazon.com/ai-liberation', '_blank')}
                  className="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-all font-semibold"
                >
                  Order on Amazon - $14.99
                </button>
              </div>
            </div>
          </div>
        )}

        {/* Community */}
        <div className="bg-white rounded-lg shadow-lg p-6">
          <div className="text-center">
            <Users className="w-12 h-12 text-pink-500 mx-auto mb-3" />
            <h3 className="text-xl font-bold text-gray-800 mb-2">Learning with 10,000+ Professionals</h3>
            <p className="text-gray-600 mb-4">
              Share progress, get support, celebrate wins
            </p>
            <button 
              onClick={() => window.open('https://divinusbooks.carrd.co/community', '_blank')}
              className="px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all font-semibold"
            >
              Join Community
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
);
};
